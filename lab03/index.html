<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Route Map</title>
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js" integrity="sha512-Abr21JO2YqcJ03XGZRPuZSWKBhJpUAR6+2wH5zBeO4wAw4oksr8PRdF+BKIRsxvCdq+Mv4670rZ+dLnIyabbGw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
	body {
	margin: 0;
	padding: 0;
	}
	#map {
	position: absolute;
	height: 100%;
	width: 100%;
	}
	#title {
	position: absolute;
	margin: 12px;
	padding: 0 1em;
	background: #efefef;
	border: 1px solid grey;
	z-index: 800;
	}
	#content {
	position: absolute;
	bottom: 0;
	margin: 0 0 12px 12px;
	padding: 8px;
	max-width: 27%;
	background: #efefef;
	border: 1px solid grey;
	z-index: 800;
	}
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="title">
        <h1>Grandfather Spring Count - 105 Corridor</h1>
    </div>
    <div id="content">
        <p>This map shows one route that is part of the Grandfather Mountain Christmas and Spring Bird Counts. Beginning in Foscoe, it follows NC Highway 105 and stops at the most 'birdy' locations that are publicly accessible or have given permission to bird counters. Several stops are along the headwaters of the Watauga and Linville Rivers which both attract migratory and resident bird species.</p>
        <p>The Grandfather Mountain Christmas count is part of National Audubon Society's <a href="https://www.audubon.org/conservation/science/christmas-bird-count">Christmas Bird Count</a> program, which collects data on a massive scale yearly to find trends in bird populations. Grandfather Mountain also conducts the same count in late spring to monitor breeding bird populations.</p>
        <p>Author: <a href="https://rivermont.xyz">Will Bennett</a><br>
        <small>Source code available on <a href="https://github.com/rivermont/sp2024/tree/master/lab03" target="_blank">GitHub</a>.</small></p>
    </div>

	<!-- begin Leaflet code -->
	<script src="./GrandfatherRoute1.js"></script>
	<script src="./GrandfatherStops.js"></script>
	<script>

	var map = L.map('map', {zoomControl: false});

	L.control.zoom({
		position: 'topright'
	}).addTo(map);

    // basemap
	var Esri_NatGeoWorldMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}', {
		attribution: 'Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC',
		maxZoom: 14
	}).addTo(map);

	// display data
	var route = L.geoJson(route, {
	    style: function(feature) {
            return {
            lineJoin: "miter",
            color: "#1c9099",
            weight: 5,
            //opacity: 0.2,
            dashArray: "10, 8"
            }
        }
    }).addTo(map);

	var hotspots = L.geoJson(stops, {
	    onEachFeature: function(feature, layer) {
            layer.bindTooltip(feature.properties['name']);
	        layer.bindPopup('<b>' + feature.properties.name + '</b><p>' + feature.properties['desc'] + '</p><a href="' + feature.properties.url + '" target="_blank">eBird checklist</a>');
        }
	}).addTo(map);

	// zoom map to data extent
	map.fitBounds(route.getBounds());

	</script>
</body>
</html>